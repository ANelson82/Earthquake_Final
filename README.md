# Storing Earthquake Events into a cloud based noSQL storage solution with API access
- **Using Python to store earthquake events into a DynamoDB with HTTP access**
# Ingesting Web Data Using Cloud Technologies
- In this project I wanted to ingest JSON data into cloud storage using NoSQL.
- I created an HTTP API to access the data.
# Presentation
[-> Click here for Video Presentation <-](https://www.youtube.com/)
# The Goal and Plan
- I created a whiteboard diagram of the pipeline to get a plan of how to build it and what tools I would need to incorporate.
![alt text](https://raw.githubusercontent.com/ANelson82/Earthquake_Final/master/earthquake_whiteboard.jpg "Whiteboard")
# The Data Set
- The web data comes from [USGS EARTHQUAKE API](https://earthquake.usgs.gov/fdsnws/event/1/).
- This powerful API allows users to query the Earthquake database in different ways, including by date.
- The data utilized was generated by quering all earthquakes from 2020-01-01 to 2020-01-02, this returned 610 events.
- The following attributes were selected for ingestion into the database: id, magnitude, focaldepth, lat, long, time, update_time
# Used Tools
- Python, AWS CLI, DynamoBD, Lambda, API HTTP Gateway
# Connect
- After setting my request parameters to the dates I wanted, I downloaded the raw json file to my computer.
- The JSON data was read using the JSON library and the payload was extracted into variables.
- A connection to the DynamoDB database was made via the boto3 library and the AWS command line interface.
# Processing
- The entire code was within a Azure timer trigger function.  The timer was set with a CRON function to run every 5 minutes.
# Storage
The function triggered a commit of the JSON payload into an Azure SQL cloud database.
![alt text](https://github.com/ANelson82/btc_azure_function/blob/master/btc_sql_50.png "SQL Storage")
# Visualization
- PowerBI was used to create a connection to the Azure SQL server and ingest data and display it for visualization.
![alt text](https://github.com/ANelson82/btc_azure_function/blob/master/powerBI_BTC.png "Power BI Visualization")
# Challenges
- I learned that DynamoDB doesn't take floats, and you need to pass the json.dumps method requires a parse as decimal command.
# Conclusion
This pipeline project demonstrates a way to automate web data ingestion and storage using new serverless processing tools and well-established SQL database that can be accessed by stakeholders within an organization.
# Helpful Links
- [AWS HTTP-API-DYNAMODB Tutorial](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-dynamo-db.html#http-api-dynamo-db-create-function)
- [Bantu Teacher Youtube tutorial](https://youtu.be/-iYkKswrDbs)
# Follow Me On
- [Linkedin/andynelson1982](https://www.linkedin.com/in/andynelson1982/)